(function(t){function e(e){for(var r,o,n=e[0],c=e[1],l=e[2],d=0,_=[];d<n.length;d++)o=n[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&_.push(s[o][0]),s[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(_.length)_.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],r=!0,n=1;n<a.length;n++){var c=a[n];0!==s[c]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},s={app:0},i=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/vue-diplom-deploy/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1404:function(t,e,a){t.exports=a.p+"img/noPhoto.f30a05db.jpg"},3650:function(t,e,a){"use strict";a("b0a2")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header",{staticClass:"header container"},[a("div",{staticClass:"header__wrapper"},[a("router-link",{attrs:{to:{name:"main"}}},[a("span",{staticClass:"header__info"},[t._v("Каталог")])]),a("router-link",{staticClass:"header__logo",attrs:{to:{name:"main"}}},[a("img",{attrs:{src:"img/svg/logo-moire.svg",alt:"Логотип интернет магазина Moire",width:"116",height:"34"}})]),a("a",{staticClass:"header__tel",attrs:{href:"tel:8 800 600 90 09"}},[t._v(" 8 800 600 90 09 ")]),a("CartIndicator")],1)]),a("router-view"),a("footer",{staticClass:"footer container"},[a("div",{staticClass:"footer__wrapper"},[a("ul",{staticClass:"footer__links"},[a("li",[a("router-link",{staticClass:"footer__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),t._m(0),t._m(1),t._m(2),t._m(3)]),a("ul",{staticClass:"footer__social social"},[a("li",{staticClass:"social__item"},[a("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Вконтакте"}},[a("svg",{attrs:{width:"20",height:"11",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-vk"}})])])]),a("li",{staticClass:"social__item"},[a("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Инстаграм"}},[a("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-insta"}})])])]),a("li",{staticClass:"social__item"},[a("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Facebook"}},[a("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-facebook"}})])])]),a("li",{staticClass:"social__item"},[a("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Twitter"}},[a("svg",{attrs:{width:"17",height:"14",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-twitter"}})])])]),a("li",{staticClass:"social__item"},[a("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Telegram"}},[a("svg",{attrs:{width:"19",height:"17",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-telegram"}})])])])]),a("p",{staticClass:"footer__desc"},[t._v(" Все права на материалы, находящиеся на сайте, охраняются в соответствии \u2028с законодательством РФ, в том числе об авторском праве и смежных правах. ")]),t._m(4),a("span",{staticClass:"footer__copyright"},[t._v(" © 2022 Moire ")])])])],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{staticClass:"footer__link",attrs:{href:"tel:88006009009"}},[t._v(" 8 800 600 90 09 ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{staticClass:"footer__link",attrs:{href:"mailto:hi@moire.com"}},[t._v(" hi@moire.com ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{staticClass:"footer__link",attrs:{href:"#"}},[t._v(" Распродажа ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{staticClass:"footer__link footer__link--medium",attrs:{href:"#"}},[t._v(" Заказать звонок ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"footer__data"},[a("li",[a("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Политика конфиденциальности ")])]),a("li",[a("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Публичная оферта ")])])])}],o=a("5530"),n=a("2f62"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-link",{staticClass:"header__cart",attrs:{to:{name:"cart"},"aria-label":"Корзина с товарами"}},[a("svg",{attrs:{width:"19",height:"24"}},[a("use",{attrs:{"xlink:href":"#icon-cart"}})]),a("span",{staticClass:"header__count",attrs:{"aria-label":"Количество товаров"}},[t._v(t._s(t.totalCartProducts))])])],1)},l=[],u={computed:Object(o["a"])({},Object(n["e"])({totalCartProducts:function(t){return t.cartProductsData.length}}))},d=u,_=a("2877"),m=Object(_["a"])(d,c,l,!1,null,null,null),p=m.exports,f={components:{CartIndicator:p},created:function(){var t=localStorage.getItem("userAccessKey");t&&this.updateUserAccessKey(t),this.loadCart()},methods:Object(o["a"])(Object(o["a"])({},Object(n["b"])(["loadCart"])),Object(n["d"])(["updateUserAccessKey"]))},v=f,h=Object(_["a"])(v,s,i,!1,null,null,null),C=h.exports,y=a("8c4f"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"content container"},[a("div",{staticClass:"content__top"},[a("div",{staticClass:"content__row"},[a("h1",{staticClass:"content__title"},[t._v(" Каталог ")]),a("span",{staticClass:"content__info"},[t._v(" "+t._s(t.countProducts)+" товаров ")])])]),a("div",{staticClass:"content__catalog"},[a("ProductFilter",{attrs:{"price-from":t.filterPriceFrom,"price-to":t.filterPriceTo,"category-id":t.filterCategoryId,"color-id":t.filterColor,"materials-id":t.filterMaterials,"seasons-id":t.filterSeasons},on:{"update:priceFrom":function(e){t.filterPriceFrom=e},"update:price-from":function(e){t.filterPriceFrom=e},"update:priceTo":function(e){t.filterPriceTo=e},"update:price-to":function(e){t.filterPriceTo=e},"update:categoryId":function(e){t.filterCategoryId=e},"update:category-id":function(e){t.filterCategoryId=e},"update:colorId":function(e){t.filterColor=e},"update:color-id":function(e){t.filterColor=e},"update:materialsId":function(e){t.filterMaterials=e},"update:materials-id":function(e){t.filterMaterials=e},"update:seasonsId":function(e){t.filterSeasons=e},"update:seasons-id":function(e){t.filterSeasons=e}}}),a("section",{staticClass:"catalog"},[a("ProductList",{attrs:{products:t.products}}),a("BasePagination",{attrs:{count:t.countProducts,"per-page":t.productsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)])},b=[],k=(a("d81d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"catalog__pagination pagination"},[a("li",{staticClass:"pagination__item"},[1===t.page?a("a",{staticClass:"pagination__link pagination__link--arrow pagination__link--disabled",attrs:{"aria-label":"Предыдущая страница"}},[a("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-arrow-left"}})])]):a("a",{staticClass:"pagination__link pagination__link--arrow",attrs:{href:"#","aria-label":"Предыдущая страница"},on:{click:function(e){return e.preventDefault(),t.prevPage(t.page,t.pages)}}},[a("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-arrow-left"}})])])]),t._l(t.pages,(function(e){return a("li",{key:e,staticClass:"pagination__item",staticStyle:{cursor:"pointer"}},[a("a",{staticClass:"pagination__link",class:{"pagination__link--current":e===t.page},on:{click:function(a){return a.preventDefault(),t.paginate(e)}}},[t._v(" "+t._s(e)+" ")])])})),a("li",{staticClass:"pagination__item"},[a("a",{staticClass:"pagination__link pagination__link--arrow",attrs:{href:"#","aria-label":"Следующая страница"},on:{click:function(e){return e.preventDefault(),t.nextPage(t.page,t.pages)}}},[a("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-arrow-right"}})])])])],2)}),P=[],I={model:{prop:"page",event:"paginate"},props:["page","count","perPage"],computed:{pages:function(){return Math.ceil(this.count/this.perPage)}},methods:{paginate:function(t){this.$emit("paginate",t)},nextPage:function(t,e){if(t<e){var a=t+1;this.$emit("paginate",a)}},prevPage:function(t,e){if(console.log(t),console.log(e),t>=e){var a=t-1;this.$emit("paginate",a)}}}},w=I,x=Object(_["a"])(w,k,P,!1,null,null,null),T=x.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("aside",{staticClass:"filter"},[a("form",{staticClass:"filter__form form",attrs:{action:"#",method:"get"},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Цена")]),a("label",{staticClass:"form__label form__label--price"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentPriceFrom,expression:"currentPriceFrom",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"min-price"},domProps:{value:t.currentPriceFrom},on:{input:function(e){e.target.composing||(t.currentPriceFrom=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"form__value"},[t._v("От")])]),a("label",{staticClass:"form__label form__label--price"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentPriceTo,expression:"currentPriceTo",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"max-price"},domProps:{value:t.currentPriceTo},on:{input:function(e){e.target.composing||(t.currentPriceTo=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"form__value"},[t._v("До")])])]),a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Категория")]),a("label",{staticClass:"form__label form__label--select"},[a("select",{directives:[{name:"model",rawName:"v-model.number",value:t.currentCategoryId,expression:"currentCategoryId",modifiers:{number:!0}}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.currentCategoryId=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"0"}},[t._v("Все категории")]),t._l(t.categories,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.title))])}))],2)])]),a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Цвет")]),a("ul",{staticClass:"colors"},t._l(t.colorsData,(function(e){return a("li",{key:e.id,staticClass:"colors__item"},[a("label",{staticClass:"colors__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.colorCategory,expression:"colorCategory"}],staticClass:"colors__radio sr-only",attrs:{type:"checkbox",name:"color"},domProps:{value:e.id,checked:Array.isArray(t.colorCategory)?t._i(t.colorCategory,e.id)>-1:t.colorCategory},on:{change:function(a){var r=t.colorCategory,s=a.target,i=!!s.checked;if(Array.isArray(r)){var o=e.id,n=t._i(r,o);s.checked?n<0&&(t.colorCategory=r.concat([o])):n>-1&&(t.colorCategory=r.slice(0,n).concat(r.slice(n+1)))}else t.colorCategory=i}}}),a("span",{staticClass:"colors__value",style:{"background-color":e.code}})])])})),0)]),a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Материал")]),a("ul",{staticClass:"check-list"},t._l(t.materialsData,(function(e){return a("li",{key:e.id,staticClass:"check-list__item"},[a("label",{staticClass:"check-list__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.materialsCategory,expression:"materialsCategory"}],staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"material"},domProps:{value:e.id,checked:Array.isArray(t.materialsCategory)?t._i(t.materialsCategory,e.id)>-1:t.materialsCategory},on:{change:function(a){var r=t.materialsCategory,s=a.target,i=!!s.checked;if(Array.isArray(r)){var o=e.id,n=t._i(r,o);s.checked?n<0&&(t.materialsCategory=r.concat([o])):n>-1&&(t.materialsCategory=r.slice(0,n).concat(r.slice(n+1)))}else t.materialsCategory=i}}}),a("span",{staticClass:"check-list__desc"},[t._v(" "+t._s(e.title)+" "),a("span",[t._v("("+t._s(e.productsCount)+")")])])])])})),0)]),a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Коллекция")]),a("ul",{staticClass:"check-list"},t._l(t.seasonsData,(function(e){return a("li",{key:e.id,staticClass:"check-list__item"},[a("label",{staticClass:"check-list__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.seasonsCategory,expression:"seasonsCategory"}],staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"collection",checked:""},domProps:{value:e.id,checked:Array.isArray(t.seasonsCategory)?t._i(t.seasonsCategory,e.id)>-1:t.seasonsCategory},on:{change:function(a){var r=t.seasonsCategory,s=a.target,i=!!s.checked;if(Array.isArray(r)){var o=e.id,n=t._i(r,o);s.checked?n<0&&(t.seasonsCategory=r.concat([o])):n>-1&&(t.seasonsCategory=r.slice(0,n).concat(r.slice(n+1)))}else t.seasonsCategory=i}}}),a("span",{staticClass:"check-list__desc"},[t._v(" "+t._s(e.title)+" "),a("span",[t._v("("+t._s(e.productsCount)+")")])])])])})),0)]),!0===t.loader?a("loader",{attrs:{object:"#ff9633",color1:"#ffffff",color2:"#17fd3d",size:"5",speed:"2",bg:"#343a40",objectbg:"#999793",opacity:"80",name:"circular"}}):t._e(),a("button",{staticClass:"filter__submit button button--primery",attrs:{type:"submit"}},[t._v(" Применить ")]),a("button",{staticClass:"filter__reset button button--second",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.reset.apply(null,arguments)}}},[t._v(" Сбросить ")])],1)])},O=[],D=a("bc3a"),j=a.n(D),F="https://vue-moire.skillbox.cc",q={props:["priceFrom","priceTo","categoryId","colorId","materialsId","seasonsId"],data:function(){return{currentPriceFrom:0,currentPriceTo:4e4,currentCategoryId:0,colorCategory:[],materialsCategory:[],seasonsCategory:[],categoriesData:[],colorsData:[],materialsData:[],seasonsData:[],loader:!1}},computed:{categories:function(){return this.categoriesData?this.categoriesData.items:[]},colors:function(){return this.colorsData?this.colorsData.items:[]}},watch:{priceFrom:function(t){this.currentPriceFrom=t},priceTo:function(t){this.currentPriceTo=t},categoryId:function(t){this.currentCategoryId=t},colorId:function(t){this.colorCategory=t},seasonsId:function(t){this.seasonsCategory=t},materialsId:function(t){this.materialsCategory=t}},methods:{submit:function(){var t=this;this.loader=!0,clearTimeout(this.loading),this.loading=setTimeout((function(){t.$emit("update:priceFrom",t.currentPriceFrom),t.$emit("update:priceTo",t.currentPriceTo),t.$emit("update:categoryId",t.currentCategoryId),t.$emit("update:colorId",t.colorCategory),t.$emit("update:seasonsId",t.seasonsCategory),t.$emit("update:materialsId",t.materialsCategory),t.loader=!1}),1e3)},reset:function(){this.$emit("update:priceFrom",0),this.$emit("update:priceTo",4e4),this.$emit("update:categoryId",0),this.$emit("update:colorId",[]),this.$emit("update:seasonsId",[]),this.$emit("update:materialsId",[])},loadCategories:function(){var t=this;j.a.get(F+"/api/productCategories").then((function(e){t.categoriesData=e.data}))},loadColors:function(){var t=this;j.a.get(F+"/api/colors").then((function(e){t.colorsData=e.data.items}))},loadMaterials:function(){var t=this;j.a.get(F+"/api/materials").then((function(e){t.materialsData=e.data.items}))},loadSeasons:function(){var t=this;j.a.get(F+"/api/seasons").then((function(e){t.seasonsData=e.data.items}))}},created:function(){this.loadCategories(),this.loadColors(),this.loadMaterials(),this.loadSeasons()}},A=q,S=Object(_["a"])(A,$,O,!1,null,null,null),E=S.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"catalog__list"},t._l(t.products,(function(t){return a("ProductItem",{key:t.id,attrs:{product:t}})})),1)},N=[],z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"catalog__item"},[a("router-link",{staticClass:"catalog__pic",attrs:{to:{name:"product",params:{id:t.product.id}}}},[a("img",{attrs:{src:t.currentImage,alt:t.currentImage}})]),a("h3",{staticClass:"catalog__title"},[a("a",{attrs:{href:"#"}},[t._v(" "+t._s(t.product.title)+" ")])]),a("span",{staticClass:"catalog__price"},[t._v(" "+t._s(t._f("numberFormat")(t.product.price))+" ₽ ")]),a("ProductRadioButtons",{attrs:{colors:t.product.colors,currentColor:t.currentColor},on:{"update:currentColor":function(e){t.currentColor=e},"update:current-color":function(e){t.currentColor=e}}})],1)},K=[],M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"colors colors--black"},t._l(t.colors,(function(e){return a("li",{key:e.id,staticClass:"colors__item"},[null!==e.color.code?a("label",{staticClass:"colors__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.computedColor,expression:"computedColor"}],staticClass:"colors__radio sr-only",attrs:{type:"radio",name:"color-1"},domProps:{value:e,checked:t._q(t.computedColor,e)},on:{change:function(a){t.computedColor=e}}}),null!==e.color?a("span",{staticClass:"colors__value",class:{colors__select:t.computedColor===e.color},style:{"background-color":e.color.code}}):t._e()]):t._e()])})),0)},Q=[],U={props:["colors","currentColor"],computed:{computedColor:{get:function(){return this.currentColor},set:function(t){this.$emit("update:currentColor",t)}}}},B=U,R=Object(_["a"])(B,M,Q,!1,null,null,null),W=R.exports,J=a("1404"),L=a.n(J);function Z(t){return parseInt(t,10)?(new Intl.NumberFormat).format(t):0}var G={components:{ProductRadioButtons:W},filters:{numberFormat:Z},props:["product"],data:function(){return{currentColor:null,currentImage:this.product.colors[0].gallery?this.product.colors[0].gallery[0].file.url:L.a}},watch:{currentColor:{handler:function(t){"undefined"!==typeof t.color&&(this.currentColor=t.color),"undefined"!==typeof t.gallery&&(null!==t.gallery?this.currentImage=t.gallery[0].file.url:this.currentImage=L.a)}}}},H=G,X=Object(_["a"])(H,z,K,!1,null,null,null),Y=X.exports,tt={components:{ProductItem:Y},props:["products"]},et=tt,at=Object(_["a"])(et,V,N,!1,null,null,null),rt=at.exports,st={data:function(){return{page:1,productsPerPage:12,filterPriceFrom:0,filterPriceTo:4e4,filterCategoryId:0,filterColor:[],filterMaterials:[],filterSeasons:[],productsData:null}},components:{ProductList:rt,ProductFilter:E,BasePagination:T},computed:{products:function(){return this.productsData?this.productsData.items.map((function(t){return Object(o["a"])({},t)})):[]},countProducts:function(){return this.productsData?this.productsData.pagination.total:0}},methods:{loadProducts:function(){var t=this;j.a.get("".concat(F,"/api/products"),{params:{page:this.page,limit:this.productsPerPage,minPrice:this.filterPriceFrom,maxPrice:this.filterPriceTo,categoryId:this.filterCategoryId,colorIds:this.filterColor,materialIds:this.filterMaterials,seasonIds:this.filterSeasons}}).then((function(e){t.productsData=e.data}))}},watch:{page:function(){this.loadProducts()},filterPriceFrom:function(){this.loadProducts()},filterPriceTo:function(){this.loadProducts()},filterCategoryId:function(){this.loadProducts()},filterColor:function(){this.loadProducts()},filterMaterials:function(){this.loadProducts()},filterSeasons:function(){this.loadProducts()}},created:function(){this.loadProducts()}},it=st,ot=Object(_["a"])(it,g,b,!1,null,null,null),nt=ot.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[t._v("Страница не найдена")])},lt=[],ut={},dt=ut,_t=Object(_["a"])(dt,ct,lt,!1,null,null,null),mt=_t.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"content container"},[a("div",{staticClass:"content__top"},[a("ul",{staticClass:"breadcrumbs"},[t._m(0),a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link"},[t._v(" "+t._s(t.product.title)+" ")])])])]),a("section",{staticClass:"item"},[a("div",{staticClass:"item__pics pics"},[a("div",{staticClass:"pics__wrapper"},[a("img",{attrs:{src:t.currentImage,alt:t.currentImage}})]),a("ul",{staticClass:"pics__list"},t._l(t.product.colors,(function(e){return a("li",{key:e.name,staticClass:"pics__item"},[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.selectImage(e)}}},[a("img",{staticClass:"pics__gallery",class:{"pics__link pics__link--current":t.currentImage===(e.gallery?e.gallery[0].file.url:t.noPhoto)},attrs:{src:e.gallery?e.gallery[0].file.url:t.noPhoto,alt:e.gallery?e.gallery[0].file.url:t.noPhoto}})])])})),0)]),a("div",{staticClass:"item__info"},[a("span",{staticClass:"item__code"},[t._v("Артикул: "+t._s(t.product.id))]),a("h2",{staticClass:"item__title"},[t._v(" "+t._s(t.product.title)+" ")]),a("div",{staticClass:"item__form"},[a("form",{staticClass:"form",attrs:{action:"#",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.addToCart.apply(null,arguments)}}},[a("div",{staticClass:"item__row item__row--center"},[a("div",{staticClass:"form__counter"},[a("button",{attrs:{type:"button","aria-label":"Убрать один товар"},on:{click:function(e){return e.preventDefault(),t.deleteCount.apply(null,arguments)}}},[a("svg",{attrs:{width:"12",height:"12",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-minus"}})])]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.quantity,expression:"quantity",modifiers:{number:!0}}],attrs:{type:"number",value:"1",min:"1",name:"count"},domProps:{value:t.quantity},on:{input:function(e){e.target.composing||(t.quantity=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("button",{attrs:{type:"button","aria-label":"Добавить один товар"},on:{click:function(e){return e.preventDefault(),t.addCount.apply(null,arguments)}}},[a("svg",{attrs:{width:"12",height:"12",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-plus"}})])])]),a("b",{staticClass:"item__price"},[t._v(" "+t._s(t._f("numberFormat")(t.product.price))+" ₽ ")])]),a("div",{staticClass:"item__row"},[a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Цвет")]),a("ProductRadioButtons",{attrs:{colors:t.product.colors,currentColor:t.currentColor},on:{"update:currentColor":function(e){t.currentColor=e},"update:current-color":function(e){t.currentColor=e}}})],1),a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Размер")]),a("label",{staticClass:"form__label form__label--small form__label--select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentSizeId,expression:"currentSizeId"}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentSizeId=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"0"}},[t._v("Выберите размер")]),t._l(t.allSizes,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.title))])}))],2)])])]),!0===t.loader?a("loader",{attrs:{object:"#ff9633",color1:"#ffffff",color2:"#17fd3d",size:"5",speed:"2",bg:"#343a40",objectbg:"#999793",opacity:"80",name:"circular"}}):t._e(),a("button",{staticClass:"item__button button button--primery",attrs:{type:"submit"}},[t._v(" В корзину ")])],1)])]),t._m(1)]),a("ModalWindow",{ref:"modal"})],1)},ft=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link",attrs:{href:"index.html"}},[t._v(" Каталог ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item__desc"},[a("ul",{staticClass:"tabs"},[a("li",{staticClass:"tabs__item"},[a("a",{staticClass:"tabs__link tabs__link--current"},[t._v(" Информация о товаре ")])]),a("li",{staticClass:"tabs__item"},[a("a",{staticClass:"tabs__link",attrs:{href:"#"}},[t._v(" Доставка и возврат ")])])]),a("div",{staticClass:"item__content"},[a("h3",[t._v("Состав:")]),a("p",[t._v(" 60% хлопок"),a("br"),t._v(" 30% полиэстер"),a("br")]),a("h3",[t._v("Уход:")]),a("p",[t._v(" Машинная стирка при макс. 30ºC короткий отжим"),a("br"),t._v(" Гладить при макс. 110ºC"),a("br"),t._v(" Не использовать машинную сушку"),a("br"),t._v(" Отбеливать запрещено"),a("br"),t._v(" Не подвергать химчистке"),a("br")])])])}],vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{staticClass:"modal-shadow",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeModal.apply(null,arguments)}}},[a("div",{staticClass:"modal"},[a("div",{staticClass:"modal-close",on:{click:t.closeModal}},[t._v("✖")]),t._t("title",(function(){return[a("h3",{staticClass:"modal-title"},[t._v("Ошибка")])]})),t._t("body",(function(){return[a("div",{staticClass:"modal-content"},[t._v(" Пожалуйста, выберите размер и цвет ")])]})),t._t("footer",(function(){return[a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"modal-footer__button",on:{click:t.closeModal}},[t._v(" Ок ")])])]}))],2)]):t._e()},ht=[],Ct={name:"ModalWindow",data:function(){return{show:!1}},methods:{closeModal:function(){this.show=!1}}},yt=Ct,gt=(a("3650"),Object(_["a"])(yt,vt,ht,!1,null,"7de93a5e",null)),bt=gt.exports,kt={data:function(){return{currentSizeId:0,currentColor:null,allSizes:[],product:[],currentImage:null,noPhoto:L.a,quantity:1,loader:!1,modalError:!1}},components:{ProductRadioButtons:W,ModalWindow:bt},filters:{numberFormat:Z},computed:{},methods:Object(o["a"])(Object(o["a"])({},Object(n["b"])(["addProductToCart"])),{},{loadProduct:function(){var t=this;j.a.get(F+"/api/products/".concat(this.$route.params.id)).then((function(e){t.product=e.data,t.currentImage=e.data.colors[0].gallery[0].file.url,t.currentColor=t.product.colors[0].color,console.log(t.product)}))},loadSizes:function(){var t=this;j.a.get(F+"/api/products/".concat(this.$route.params.id)).then((function(e){t.allSizes=e.data.sizes}))},selectImage:function(t){this.$emit("update:currentImage",t)},addToCart:function(){var t=this;this.loader=!0,clearTimeout(this.loading),this.loading=setTimeout((function(){t.loader=!1}),1e3),this.currentSizeId>0?this.addProductToCart({productId:this.product.id,colorId:this.currentColor,sizeId:this.currentSizeId,quantity:this.quantity}):this.currentSizeId<1&&setTimeout((function(){t.$refs.modal.show=!0}),1e3)},addCount:function(){this.quantity++},deleteCount:function(){this.quantity>0&&this.quantity--}}),watch:{"$route.params.id":{handler:function(){this.loadProduct(),this.loadSizes()}},product:{handler:function(){this.currentColor=this.product.colors[0].color,this.currentImage=this.product.colors[0].gallery?this.product.colors[0].gallery[0].file.url:L.a}},currentColor:{handler:function(t){t.color&&(this.currentColor=t.color),"undefined"!==typeof t.gallery&&(t.gallery?this.currentImage=t.gallery[0].file.url:this.currentImage=L.a)}},currentImage:{handler:function(t){"undefined"!==typeof t.gallery&&(t.gallery?this.currentImage=t.gallery[0].file.url:this.currentImage=L.a),t.color&&(this.currentColor=t.color)}}},created:function(){this.loadProduct(),this.loadSizes()}},Pt=kt,It=Object(_["a"])(Pt,pt,ft,!1,null,null,null),wt=It.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"content container"},[a("div",{staticClass:"content__top"},[a("ul",{staticClass:"breadcrumbs"},[t._m(0),a("li",{staticClass:"breadcrumbs__item"},[a("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"cart"}}},[t._v(" Корзина ")])],1)]),a("div",{staticClass:"content__row"},[a("h1",{staticClass:"content__title"},[t._v(" Корзина ")]),a("span",{staticClass:"content__info"},[t._v(" "+t._s(t.productsCart.length)+" товара/ов ")])])]),a("section",{staticClass:"cart"},[a("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[a("div",{staticClass:"cart__field"},[a("ul",{staticClass:"cart__list"},t._l(t.productsCart,(function(t){return a("CartItem",{key:t.id,attrs:{item:t}})})),1)]),a("div",{staticClass:"cart__block"},[a("p",{staticClass:"cart__desc"},[t._v(" Мы посчитаем стоимость доставки на следующем этапе ")]),a("p",{staticClass:"cart__price"},[t._v(" Итого: "),a("span",[t._v(t._s(t._f("numberFormat")(t.totalPrice))+" ₽")])]),Number(t.totalPrice)>0?a("router-link",{attrs:{to:{name:"order"}}},[a("button",{staticClass:"cart__button button button--primery",attrs:{type:"submit"}},[t._v(" Оформить заказ ")])]):0===Number(t.totalPrice)?a("router-link",{attrs:{to:{name:"main"}}},[a("button",{staticClass:"cart__button button button--primery"},[t._v(" Корзина пуста (перейти к покупкам) ")])]):t._e()],1)])])])},Tt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link",attrs:{href:"index.html"}},[t._v(" Каталог ")])])}],$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"cart__item product"},[a("div",{staticClass:"product__pic"},[a("img",{attrs:{src:t.item.color.gallery[0].file.url,width:"120",height:"120",alt:"Название товара"}})]),a("h3",{staticClass:"product__title"},[t._v(" "+t._s(t.item.product.title)+" ")]),a("p",{staticClass:"product__info product__info--color"},[t._v(" Цвет: "),a("span",[a("i",{style:{"background-color":t.item.color.color.code}}),t._v(" "+t._s(t.item.color.color.title)+" ")]),t._v(" Размер: "),a("span",{staticStyle:{"padding-left":"10px"}},[t._v(" "+t._s(t.item.size.title)+" ")])]),a("span",{staticClass:"product__code"},[t._v(" Артикул: "+t._s(t.item.product.id)+" ")]),a("div",{staticClass:"product__counter form__counter"},[a("button",{attrs:{type:"button","aria-label":"Убрать один товар"},on:{click:function(e){return e.preventDefault(),t.deleteCount(t.item)}}},[a("svg",{attrs:{width:"10",height:"10",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-minus"}})])]),a("input",{attrs:{type:"number",name:"count"},domProps:{value:t.item.quantity},on:{input:function(e){return t.changeQuantity({$event:e,item:t.item})}}}),a("button",{attrs:{type:"button","aria-label":"Добавить один товар"},on:{click:function(e){return e.preventDefault(),t.addCount(t.item)}}},[a("svg",{attrs:{width:"10",height:"10",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-plus"}})])])]),a("b",{staticClass:"product__price"},[t._v(" "+t._s(t._f("numberFormat")(t.item.product.price*t.item.quantity))+" ₽ ")]),a("button",{staticClass:"product__del button-del",attrs:{type:"button","aria-label":"Удалить товар из корзины"},on:{click:function(e){return e.preventDefault(),t.deleteProduct(t.item)}}},[a("svg",{attrs:{width:"20",height:"20",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-close"}})])])])},Ot=[],Dt=(a("ac1f"),a("5319"),a("a9e3"),{data:function(){return{}},props:{item:Object},filters:{numberFormat:Z},methods:{deleteCount:function(t){t.quantity>1&&(t.quantity--,this.$store.dispatch("updateCartProductQuantity",{basketItemId:t.id,quantity:t.quantity}))},addCount:function(t){t.quantity++,this.$store.dispatch("updateCartProductQuantity",{basketItemId:t.id,quantity:t.quantity})},deleteProduct:function(t){this.$store.dispatch("deleteProductFromCart",{basketItemId:t.id})},changeQuantity:function(t){var e=t.$event,a=t.item;if(e.target.value=e.target.value.replace(/[^0-9]/g,""),e.target.value>0){var r=e.target.value;this.$store.dispatch("updateCartProductQuantity",{basketItemId:a.id,quantity:Number(r)})}}}}),jt=Dt,Ft=(a("d377"),Object(_["a"])(jt,$t,Ot,!1,null,null,null)),qt=Ft.exports,At={components:{CartItem:qt},filters:{numberFormat:Z},data:function(){return{}},computed:Object(o["a"])({productsCart:function(){return this.$store.state.cartProductsData}},Object(n["c"])({totalPrice:"cartTotalPrice"})),methods:{}},St=At,Et=Object(_["a"])(St,xt,Tt,!1,null,null,null),Vt=Et.exports,Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"content container"},[a("div",{staticClass:"content__top"},[a("ul",{staticClass:"breadcrumbs"},[t._m(0),a("li",{staticClass:"breadcrumbs__item"},[a("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"cart"}}},[t._v(" Корзина ")])],1),t._m(1)]),t._m(2)]),a("section",{staticClass:"cart"},[a("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[a("div",{staticClass:"cart__field"},[a("div",{staticClass:"cart__data"},[a("label",{staticClass:"form__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form__input",attrs:{type:"text",name:"name",placeholder:"Введите ваше полное имя"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),a("span",{staticClass:"form__value"},[t._v("ФИО")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!0===t.nameValid,expression:"nameValid === true"}],staticClass:"form__error"},[t._v("Введите полное имя")])]),a("label",{staticClass:"form__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form__input",attrs:{type:"text",name:"address",placeholder:"Введите ваш адрес"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}}),a("span",{staticClass:"form__value"},[t._v("Адрес доставки")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!0===t.addressValid,expression:"addressValid === true"}],staticClass:"form__error"},[t._v("Введите полный адрес")])]),a("label",{staticClass:"form__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"form__input",attrs:{type:"tel",name:"phone",minlength:"12",maxlength:"12"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}}),a("span",{staticClass:"form__value"},[t._v("Телефон")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!0===t.phoneValid,expression:"phoneValid === true"}],staticClass:"form__error"},[t._v("Неверный формат телефона")])]),a("label",{staticClass:"form__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form__input",attrs:{type:"email",name:"email",placeholder:"Введи ваш Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),a("span",{staticClass:"form__value"},[t._v("Email")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!0===t.emailValid,expression:"emailValid === true"}],staticClass:"form__error"},[t._v("Неверный формат email")])]),a("label",{staticClass:"form__label"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"form__input form__input--area",attrs:{name:"comments",placeholder:"Ваши пожелания"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}}),a("span",{staticClass:"form__value"},[t._v("Комментарий к заказу")])])]),a("div",{staticClass:"cart__options"},[a("h3",{staticClass:"cart__title"},[t._v("Доставка")]),a("ul",{staticClass:"cart__options options"},t._l(t.deliveryTypes,(function(e){return a("li",{key:e.id,staticClass:"options__item"},[a("label",{staticClass:"options__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.deliveryTypeId,expression:"deliveryTypeId"}],staticClass:"options__radio sr-only",attrs:{type:"radio",name:"delivery",checked:""},domProps:{value:e.id,checked:t._q(t.deliveryTypeId,e.id)},on:{change:[function(a){t.deliveryTypeId=e.id},function(e){return t.loadPaymentId()}]}}),a("span",{staticClass:"options__value"},[t._v(" "+t._s(e.title)+" "),"0"===e.price?a("b",[t._v("(бесплатно)")]):a("b",[t._v("("+t._s(e.price)+" руб)")])])])])})),0),a("h3",{staticClass:"cart__title"},[t._v("Оплата")]),a("ul",{staticClass:"cart__options options"},t._l(t.paymentTypes,(function(e){return a("li",{key:e.id,staticClass:"options__item"},[a("label",{staticClass:"options__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentTypeId,expression:"paymentTypeId"}],staticClass:"options__radio sr-only",attrs:{type:"radio",name:"pay",checked:""},domProps:{value:e.id,checked:t._q(t.paymentTypeId,e.id)},on:{change:function(a){t.paymentTypeId=e.id}}}),a("span",{staticClass:"options__value"},[t._v(" "+t._s(e.title)+" ")])])])})),0)])]),a("div",{staticClass:"cart__block"},[a("ul",{staticClass:"cart__orders"},t._l(t.products,(function(t){return a("OrderItem",{key:t.id,attrs:{product:t}})})),1),!0===t.loader?a("loader",{attrs:{object:"#ff9633",color1:"#ffffff",color2:"#17fd3d",size:"5",speed:"2",bg:"#343a40",objectbg:"#999793",opacity:"80",name:"circular"}}):t._e(),a("div",{staticClass:"cart__total"},[a("p",[t._v("Доставка: "),1===t.deliveryTypeId?a("b",[t._v("бесплатно")]):t._e(),2===t.deliveryTypeId?a("b",[t._v("Курьером (1200 руб)")]):t._e()]),a("p",[t._v("Итого: "),a("b",[t._v(t._s(t.products.length))]),t._v(" товара/ов на сумму "),a("b",[t._v(t._s(t._f("numberFormat")(t.totalPrice))+" ₽")])])]),a("button",{staticClass:"cart__button button button--primery",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.checkForm.apply(null,arguments)}}},[t._v(" Оформить заказ ")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.nameValid||!0===t.phoneValid||!0===t.emailValid||!0===t.addressValid,expression:"nameValid === true || phoneValid === true || emailValid === true || addressValid === true"}],staticClass:"cart__error form__error-block"},[a("h4",[t._v("Заявка не отправлена!")]),a("p",[t._v(" Похоже произошла ошибка. Попробуйте отправить снова или перезагрузите страницу. ")])])])])])},zt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link",attrs:{href:"index.html"}},[t._v(" Каталог ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content__row"},[a("h1",{staticClass:"content__title"},[t._v(" Оформление заказа ")])])}],Kt=(a("b0c0"),a("00b4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"cart__order"},[a("h3",[t._v(t._s(t.product.product.title)+" ("+t._s(t.product.quantity)+" шт.)")]),a("b",[t._v(t._s(t._f("numberFormat")(t.product.product.price*t.product.quantity))+" ₽")]),a("span",[t._v("Артикул: "+t._s(t.product.product.id))])])}),Mt=[],Qt={props:["product"],filters:{numberFormat:Z}},Ut=Qt,Bt=Object(_["a"])(Ut,Kt,Mt,!1,null,null,null),Rt=Bt.exports,Wt={data:function(){return{name:"",address:"",phone:"+7",email:"",comment:"",deliveryTypes:[],deliveryTypeId:1,paymentTypes:[],paymentTypeId:1,errors:[],nameValid:!1,addressValid:!1,phoneValid:!1,emailValid:!1,loader:!1}},components:{OrderItem:Rt},filters:{numberFormat:Z},computed:Object(o["a"])(Object(o["a"])({},Object(n["c"])({totalPrice:"cartTotalPrice"})),{},{products:function(){return this.$store.state.cartProductsData}}),methods:Object(o["a"])(Object(o["a"])({loadDeliveryId:function(){var t=this;j.a.get("".concat(F,"/api/deliveries")).then((function(e){t.deliveryTypes=e.data}))},loadPaymentId:function(){var t=this;j.a.get("".concat(F,"/api/payments"),{params:{deliveryTypeId:this.deliveryTypeId}}).then((function(e){t.paymentTypes=e.data,console.log(t.paymentTypes)}))}},Object(n["b"])(["createOrder"])),{},{checkForm:function(){var t=this;this.loader=!0,clearTimeout(this.loading),this.loading=setTimeout((function(){!1===t.nameValid&&!1===t.addressValid&&!1===t.phoneValid&&!1===t.emailValid&&t.createOrder({name:t.name,address:t.address,phone:t.phone,email:t.email,deliveryTypeId:t.deliveryTypeId,paymentTypeId:t.paymentTypeId,comment:t.comment}),t.nameValid=!1,t.addressValid=!1,t.phoneValid=!1,t.emailValid=!1,t.name.length<3&&(t.nameValid=!0),t.address.length<7&&(t.addressValid=!0),(!/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(t.phone)||t.phone.length<12)&&(t.phoneValid=!0),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.email)||(t.emailValid=!0),t.loader=!1}),1e3)}}),created:function(){this.loadDeliveryId(),this.loadPaymentId()}},Jt=Wt,Lt=Object(_["a"])(Jt,Nt,zt,!1,null,null,null),Zt=Lt.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"content container"},[a("div",{staticClass:"content__top"},[a("ul",{staticClass:"breadcrumbs"},[t._m(0),a("li",{staticClass:"breadcrumbs__item"},[a("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"cart"}}},[t._v(" Корзина ")])],1),t._m(1)]),a("h1",{staticClass:"content__title"},[t._v(" Заказ оформлен "),a("span",[t._v("№ "+t._s(t.products.id))])])]),a("section",{staticClass:"cart"},[a("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[a("div",{staticClass:"cart__field"},[a("p",{staticClass:"cart__message"},[t._v(" Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ")]),a("ul",{staticClass:"dictionary"},[a("li",{staticClass:"dictionary__item"},[a("span",{staticClass:"dictionary__key"},[t._v(" Получатель ")]),a("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.products.name)+" ")])]),a("li",{staticClass:"dictionary__item"},[a("span",{staticClass:"dictionary__key"},[t._v(" Адрес доставки ")]),a("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.products.address)+" ")])]),a("li",{staticClass:"dictionary__item"},[a("span",{staticClass:"dictionary__key"},[t._v(" Телефон ")]),a("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.products.phone)+" ")])]),a("li",{staticClass:"dictionary__item"},[a("span",{staticClass:"dictionary__key"},[t._v(" Email ")]),a("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.products.email)+" ")])]),a("li",{staticClass:"dictionary__item"},[a("span",{staticClass:"dictionary__key"},[t._v(" Способ оплаты ")]),a("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.products.paymentType)+" ")])])])]),a("div",{staticClass:"cart__block"},[a("ul",{staticClass:"cart__orders"},t._l(t.products.basket.items,(function(e){return a("li",{key:e.id,staticClass:"cart__order"},[a("h3",[t._v(t._s(e.product.title)+" ("+t._s(e.quantity)+" шт.)")]),a("b",[t._v(t._s(t._f("numberFormat")(e.product.price*e.quantity))+" ₽")]),a("span",[t._v("Артикул: "+t._s(e.product.id))])])})),0),a("div",{staticClass:"cart__total"},[a("p",[t._v("Доставка: "),a("b",[t._v(t._s(t.products.deliveryType.title))])]),a("p",[t._v("Итого: "),a("b",[t._v(t._s(t.allQuantity()))]),t._v(" товара/ов на сумму "),a("b",[t._v(t._s(t._f("numberFormat")(t.products.totalPrice))+" ₽")])])])])])])])},Ht=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link",attrs:{href:"index.html"}},[t._v(" Каталог ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])}],Xt=(a("d3b7"),{filters:{numberFormat:Z},computed:{products:function(){return this.$store.state.orderInfoData}},methods:Object(o["a"])(Object(o["a"])({},Object(n["b"])(["loadOrderInfo"])),{},{allQuantity:function(){var t=this.$store.state.orderInfoData.basket.items.map((function(t){return t.quantity})),e=t.reduce((function(t,e){return t+e}),0);return e}}),created:function(){this.loadOrderInfo(this.$route.params.id)}}),Yt=Xt,te=Object(_["a"])(Yt,Gt,Ht,!1,null,null,null),ee=te.exports;r["a"].use(y["a"]);var ae=[{name:"main",component:nt,path:"/"},{name:"product",component:wt,path:"/product/:id"},{name:"cart",component:Vt,path:"/cart"},{name:"order",component:Zt,path:"/order"},{name:"order-info",component:ee,path:"/order-info/:id"},{name:"notFound",component:mt,path:"*"}],re=new y["a"]({routes:ae}),se=re;a("7db0");r["a"].use(n["a"]);var ie=new n["a"].Store({state:{userAccessKey:null,orderData:null,orderInfoData:null,cartProductsData:[],cartProducts:[]},mutations:{updateUserAccessKey:function(t,e){t.userAccessKey=e},updateCartProductsData:function(t,e){t.cartProductsData=e},updateCartProductQuantity:function(t,e){var a=e.basketItemId,r=e.quantity,s=t.cartProductsData.find((function(t){return t.id===a}));console.log(a),s&&(s.quantity=r)},updateOrderData:function(t,e){t.orderData=e},resetCart:function(t){t.cartProducts=[],t.cartProductsData=[]},updateOrderInfoData:function(t,e){t.orderInfoData=[],t.orderInfoData=e}},getters:{cartDetailproducts:function(t){return t.cartProductsData.map((function(t){return t}))},cartTotalPrice:function(t,e){return e.cartDetailproducts.reduce((function(t,e){return e.product.price*e.quantity+t}),0)},cartTotalQuantity:function(t,e){return e.cartDetailproducts.reduce((function(t,e){return e.quantity+t}),0)}},actions:{loadCart:function(t){j.a.get(F+"/api/baskets",{params:{userAccessKey:t.state.userAccessKey}}).then((function(e){t.state.userAccessKey||(localStorage.setItem("userAccessKey",e.data.user.accessKey),t.commit("updateUserAccessKey",e.data.user.accessKey)),t.commit("updateCartProductsData",e.data.items)}))},addProductToCart:function(t,e){var a=e.productId,r=e.colorId,s=e.sizeId,i=e.quantity;return j.a.post("".concat(F,"/api/baskets/products"),{productId:a,colorId:r.id,sizeId:s,quantity:i},{params:{userAccessKey:t.state.userAccessKey}}).then((function(e){t.commit("updateCartProductsData",e.data.items)}))},updateCartProductQuantity:function(t,e){var a=e.basketItemId,r=e.quantity;return t.commit("updateCartProductQuantity",{basketItemId:a,quantity:r}),r<1?1:j.a.put("".concat(F,"/api/baskets/products"),{basketItemId:a,quantity:r},{params:{userAccessKey:t.state.userAccessKey}}).then((function(t){}))},deleteProductFromCart:function(t,e){var a=e.basketItemId;return j.a.delete("".concat(F,"/api/baskets/products"),{data:{basketItemId:a},params:{userAccessKey:t.state.userAccessKey}}).then((function(e){t.commit("updateCartProductsData",e.data.items)}))},createOrder:function(t,e){var a=e.name,r=e.address,s=e.phone,i=e.email,o=e.deliveryTypeId,n=e.paymentTypeId,c=e.comment;return j.a.post("".concat(F,"/api/orders"),{name:a,address:r,phone:s,email:i,deliveryTypeId:o,paymentTypeId:n,comment:c},{params:{userAccessKey:t.state.userAccessKey}}).then((function(e){e.data&&t.commit("updateOrderData",e.data),t.commit("resetCart",e.data),se.push({name:"order-info",params:{id:e.data.id}})}))},loadOrderInfo:function(t,e){var a=Number(e);return j.a.get(F+"/api/orders/".concat(a),{params:{userAccessKey:t.state.userAccessKey,orderId:a}}).then((function(e){console.log(e.data),t.commit("updateOrderInfoData",e.data)}))}}}),oe=a("c27a");r["a"].use(oe["a"]),r["a"].config.productionTip=!1,new r["a"]({router:se,store:ie,render:function(t){return t(C)}}).$mount("#app")},"7dea":function(t,e,a){},b0a2:function(t,e,a){},d377:function(t,e,a){"use strict";a("7dea")}});
//# sourceMappingURL=app.a960d434.js.map